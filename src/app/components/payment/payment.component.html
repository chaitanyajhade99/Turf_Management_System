<div class="container">
  <div class="payment-wrapper" *ngIf="pendingBooking$ | async as booking; else noBooking">
    <div class="order-summary">
      <h2 class="summary-title">Order Summary</h2>
      <div class="summary-item">
        <span class="label">Turf Name</span>
        <span class="value">{{ booking.turfName }}</span>
      </div>
      <div class="summary-item">
        <span class="label">Date & Time</span>
        <span class="value">{{ booking.date | date:'fullDate' }} at {{ booking.slot }}</span>
      </div>
      <div class="summary-item total">
        <span class="label">Amount Payable</span>
        <span class="value">₹{{ booking.price }}</span>
      </div>
    </div>

    <div class="payment-form">
      <h2 class="form-title">Secure Payment</h2>
      <p class="form-subtitle">Pay securely using Razorpay</p>
      
      <!-- Payment Status -->
      <div *ngIf="paymentStatus" class="payment-status">
        <p>{{ paymentStatus }}</p>
      </div>
      
      <!-- Error Message -->
      <div *ngIf="errorMessage" class="error-message">
        <p>{{ errorMessage }}</p>
        <button class="btn btn-secondary retry-btn" (click)="retryPayment()" [disabled]="isProcessing">
          Try Again
        </button>
      </div>
      
      <!-- Payment Button -->
      <button class="btn btn-primary payment-btn" (click)="payNow()" [disabled]="isProcessing" *ngIf="!errorMessage">
        <span *ngIf="!isProcessing">Pay ₹{{ booking.price }} with Razorpay</span>
        <span *ngIf="isProcessing" class="spinner">Processing...</span>
      </button>
      
      <div class="payment-info">
        <p><small>Powered by Razorpay - India's most trusted payment gateway</small></p>
        <p><small>Your payment information is secure and encrypted</small></p>
      </div>
    </div>
  </div>
  <ng-template #noBooking>
    <div class="payment-wrapper">
      <div class="order-summary">
         <h2>Error</h2>
         <p>No pending booking found. Please select a turf and slot first.</p>
         <a routerLink="/" class="btn btn-primary">Find a Turf</a>
      </div>
    </div>
  </ng-template>
</div>